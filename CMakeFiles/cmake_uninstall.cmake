message(STATUS "Checking if install file exists...")
if(EXISTS ${CMAKE_BINARY_DIR}/install_manifest.txt)
	message(STATUS "Install file found.")
else()
	message(FATAL_ERROR "Install file not found. Uninstall failed.")
endif()

file(READ ${CMAKE_BINARY_DIR}/install_manifest.txt files)
string(REGEX REPLACE "\n" ";" files ${files})

foreach(file ${files})
	message(STATUS "Uninstalling ${file}...")
	if(IS_SYMLINK ${file} OR EXISTS ${file})
		execute_process(COMMAND ${CMAKE_COMMAND} -E remove -f ${file})
		if(IS_SYMLINK ${file} OR EXISTS ${file})
			message(STATUS "Could not uninstall ${file}.")
		else()
			message(STATUS "Successfully uninstalled ${file}")
		endif()
	else()
		message(STATUS "Cannot uninstall ${file}. File not found.")
	endif()
endforeach()

message(STATUS "Uninstall process complete.")